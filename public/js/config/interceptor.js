angular.module('interceptor',['loginRetryQueue','errorHandler']).factory('securityInterceptor',['$injector','loginRetryQueue','errorQueue',function($injector,queue,err){return function(promise){return promise.then(null,function(originalResponse){if(originalResponse.status===401){promise=queue.pushRetryFn('unauthorized-server',function retryRequest(){return $injector.get('$http')(originalResponse.config);});}else if(originalResponse.status===500||originalResponse.status===409){err.pushErrorFn(originalResponse.status,originalResponse.data);}return promise;});};}]);